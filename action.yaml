name: Install clivm
description: Install clivm https://clivm.github.io/ and install toos with clivm
inputs:
  clivm_version:
    description: installed clivm's version (e.g. v0.8.7)
    required: true
  install_path:
    description: clivm's install path
    required: false
  enable_clivm_install:
    required: false
    default: "true"
  clivm_opts:
    required: false
    default: "-l"
  working_directory:
    required: false
    default: ""
runs:
  using: composite
  steps:
    - run: |
        echo "::error ::clivm_version is required. https://github.com/clivm/clivm-installer"
        exit 1
      shell: bash
      if: inputs.clivm_version == ''

    - run: echo "${AQUA_ROOT_DIR:-${XDG_DATA_HOME:-$HOME/.local/share}/clivm}/bin" >> $GITHUB_PATH
      shell: bash
      working-directory: ${{ inputs.working_directory }}
      if: inputs.enable_clivm_install == 'true'

    - run: bash "${{github.action_path}}/action.sh"
      working-directory: ${{ inputs.working_directory }}
      shell: bash
      env:
        AQUA_INSTALL_PATH: ${{ inputs.install_path }}
        AQUA_VERSION: ${{ inputs.clivm_version }}
        AQUA_OPTS: ${{ inputs.clivm_opts }}
